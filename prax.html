<!DOCTYPE html>
<html>


<!-- Head section is for stuff that is not going to be on the page -->
<head>
	<meta charset="utf-8" />
	<title>Gunnar Portfolio</title>
	<link rel="stylesheet" href="styles/main.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=description,groups,link,list,manufacturing" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- Favicon -->
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#00aba9">
	<meta name="theme-color" content="#ffffff">
</head>

<!-- Body is for everything on the page -->
<body>
	<!-- Sticky Header with socials-->
	<div class="sticky-header">
		<a class="sticky-header-button" href="mailto: gunnarmagnum@gmail.com">gunnarmagnum@gmail.com</a>
		<a class="sticky-header-button" href="https://github.com/Raestkjoot" target="_blank">
			<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/></svg>
		</a>
		<a class="sticky-header-button" href="https://www.linkedin.com/in/gunnar-magnussen/" target="_blank">
			<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"/></svg>
		</a>
	</div>

	<!-- Header with navigation -->
	<header>
		<div>
			<h1>Gunnar Magnussen</h1>
			<p class="sub-title"><b>Gameplay Programmer</b> | Game feel, physics, graphics and systems</p>
		</div>
		<div class="nav">
			<a class="header-button" href="index.html"> Projects </a>
			<a class="header-button" href="exp-and-edu.html"> Experience & Education </a>
			<a class="header-button" href="about-me.html"> About Me </a>
		</div>
	</header>

	<!-- TEXT -->
	 <div class="outer-text-container">
	<div class="text-container">
		<h1>PRAX</h1>
		<div class="project-overview">
			<div class="project-overview-elem">
				<iframe width="560" height="315" src="https://www.youtube.com/embed/aqJeda9xJLM?si=wRF5ftpfOS4Pok7O" title="YouTube video player" frameborder="0" 
					allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
					referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
				</iframe>
			</div>
			<div class="project-overview-elem">
				<i>
					<span class="material-symbols-outlined">manufacturing</span>
					&nbsp;<b>Engine:</b>&nbsp; Unity
				</i>
				<i>
					<span class="material-symbols-outlined">description</span>
					&nbsp;<b>Language:</b>&nbsp; C#
				</i>
				<i>
					<span class="material-symbols-outlined">list</span>
					&nbsp;<b>Tasks:</b>&nbsp; Movement | shaders | 3D art
				</i>
				<i>
					<span class="material-symbols-outlined">groups</span>
					&nbsp;<b>Team Size:</b>&nbsp; 6
				</i>
				<i>
					<span class="material-symbols-outlined">link</span>
					&nbsp;<b>Links:</b>&nbsp; 
						<a class="links-button" href="https://goumdree.itch.io/prax" target="_blank">Game Page</a> - 
						<a class="links-button" href="https://github.com/Raestkjoot/PRAX" target="_blank">Source</a>
				</i>
				<i>
					The game is inspired by games like N++, that offer the player a fun and polished 
					movement system in short challenging levels. The player is expected to try the same level over and 
					over again until they succeed. Making sure the player movement felt good and responsive was foundational 
					to making our game fun.
				</i>
			</div>
		</div>
		<hr />

		<!-- PLAYER MOVEMENT -->
		<h2>
			Player Movement
		</h2>
		<p>
			We wanted to make the player feel as much in control as possible. To achieve this, the movement is directly linked to the input.
		</p>
		<!-- HTML generated using hilite.me --><div class="code"><pre style="margin: 0; line-height: 125%; tab-size: 4;"><span style="color: #75715e">// Positional movement (simplified)</span>
<span style="color: #ae81ff">public void</span> <span style="color: #66d9ef">Move</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">Vector2</span> <span style="color: #f8f8f2">inputDir)</span> <span style="color: #f8f8f2">{</span>
	<span style="color: #f8f8f2">_controller.<span style="color: #66d9ef">Move</span>(inputDir * _speed * <span style="color: #66d9ef">Time</span>.deltaTime);</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
		<p>
			On its own this can feel and look too rigid, but we balance it out with smooth visuals.
		</p>
		<p>
			The robot's rotation does not affect the movement in any way. It is simply a way to show the direction the the player is moving, while also adding to the smoothness.
			Every update the <span style="color: #66d9ef">UpdateMeshRotation</span> function is called, smoothly rotating the robot towards the last direction of movement.
			This means that if the robot is facing to the left and the player moves to the right for just one frame, 
			the robot will move right only in that frame, but the mesh will rotate smoothly over multiple frames until it faces towards the right.
		</p>
		<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%; tab-size: 4;"><span style="color: #75715e">// Smooth rotation (simplified)</span>
<span style="color: #ae81ff">private void</span> <span style="color: #66d9ef">UpdateMeshRotation</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
	<span style="color: #66d9ef">Quaternion</span> <span style="color: #f8f8f2">targetRotation</span> = <span style="color: #66d9ef">Quaternion</span>.<span style="color: #66d9ef">LookRotation</span>(_lastMoveDir,</span> <span style="color: #66d9ef">Vector3</span><span style="color: #f8f8f2">.up);</span>
 	<span style="color: #f8f8f2">_mesh.rotation</span> = <span style="color: #66d9ef">Quaternion</span>.<span style="color: #66d9ef">RotateTowards</span>(</span>
		<span style="color: #f8f8f2">_mesh.rotation,</span>
		<span style="color: #f8f8f2">targetRotation,</span>
		<span style="color: #f8f8f2">_meshRotationSpeed</span> * <span style="color: #f8f8f2"><span style="color: #66d9ef">Time</span>.deltaTime);</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
		<img src="images/prax-rotation.gif" class="project-image"/>
		<p>
			Another way we add smoothness is by making the robot tilt forwards when moving. This also helps to show the player how fast 
			they are going, which is especially important when using a joystick controller.
		</p>
		<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%; tab-size: 4;"><span style="color: #75715e">// Smooth leaning (simplified)</span>
<span style="color: #ae81ff">private void</span> <span style="color: #66d9ef">UpdateMeshTilt</span>(<span style="color: #ae81ff">float</span> normalizedSpeed) {
	<span style="color: #75715e">// Lean based on speed</span>
	<span style="color: #ae81ff">if</span> (normalizedSpeed &gt; <span style="color: #ffbe21">0.001f</span>) {
		<span style="color: #ae81ff">float</span> targetAngle = normalizedSpeed * _maxMeshTiltAngle;
		_curTiltAngle = <span style="color: #66d9ef">Mathf</span>.<span style="color: #66d9ef">Lerp</span>(_curTiltAngle, targetAngle,
			_meshTiltSpeed * <span style="color: #66d9ef">Time</span>.deltaTime);
	<span style="color: #75715e">// Lean back if not moving</span>
	} <span style="color: #ae81ff">else if</span> (_curTiltAngle &gt; <span style="color: #ffbe21">0.001f</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
		_curTiltAngle = <span style="color: #66d9ef">Mathf</span>.<span style="color: #66d9ef">Lerp</span>(_curTiltAngle, <span style="color: #ffbe21">0.0f</span>,
			_meshTiltSpeed * <span style="color: #66d9ef">Time</span>.deltaTime);
	<span style="color: #f8f8f2">}</span>
  
	_tiltingMesh.localEulerAngles = <span style="color: #ae81ff">new</span> <span style="color: #66d9ef">Vector3</span>(-_curTiltAngle, <span style="color: #ffbe21">180.0f</span><span style="color: #f8f8f2">,</span> <span style="color: #ffbe21">0.0f</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

		<img src="images/prax-tilt.gif" class="project-image"/>
		<p>
			The robot has a dash ability that quickly moves them forwards with greater speed. For the dash effect I chose to use a trail 
			renderer and a sprite animation for the thrusters. This works really well, since if the trail renderer doesn't show, like when 
			dashing against a wall, the sprite animation will still show, giving the player feedback that, even without movement, they did indeed dash.
		</p>
		<div class="project-image-container">
			<img src="images/prax-dash.gif" class="project-image"/>
			<img src="images/prax-dash-blocked.gif" class="project-image"/>
		</div>
		<hr/>

		<!-- OUTLINE SHADER -->
		 <h2>
			Outline Shader
		 </h2>
		 <p>
			We use an outline shader for our game to give it a more unique visual style. 
			The ouline effect is accomplished using a fullscreen post-processing effect with an edge detection algorithm. 
			The algorithm we use is called Robert's Cross, which compares the left and right pixels, and then the above and below pixels. 
			The vertical and horizontal differences are summed together and compared to a threshold to see if the pixel is an edge.
		 </p>
		 <img src="images/prax-roberts-cross.jpg" class="project-image"/>
		 <p>
			There is a more accurate operator, called the Sobel operator. 
			It works in a similar fashion, but also includes the diagonal pixels, comparing three pixels on each side, instead of only one, 
			and applies weights based on how close a sample pixel is to the source pixel. 
			Sobel is more accurate than Robert's Cross, but also more computationally expensive. 
			Therefore, I started with Robert's Cross for simplicity and performance, and when the result was good enough, 
			I decided that there was no reason to switch to Sobel.
		 </p>
		 <img src="images/prax-sobel.jpg" class="project-image"/>
		 <p>
			To compare pixels we sample the color, normal, and depth of each pixel. Each sample has some strengths and weaknesses, 
			so by combining them, we can more reliably detect edges.
		 </p>
		 <div class="project-image-container">
		 	<img src="images/prax-outline-samples-color.jpg" class="project-image"/>
		 	<img src="images/prax-outline-samples-normals.jpg" class="project-image"/>
		 	<img src="images/prax-outline-samples-depth.jpg" class="project-image"/>
		 </div>

	</div>
</div>

</body>
</html>