<!DOCTYPE html>
<html>


<!-- Head section is for stuff that is not going to be on the page -->
<head>
	<meta charset="utf-8" />
	<title>Gunnar Portfolio</title>
	<link rel="stylesheet" href="styles/main.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=description,groups,link,list,manufacturing" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- Favicon -->
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#00aba9">
	<meta name="theme-color" content="#ffffff">
</head>

<!-- Body is for everything on the page -->
<body>
	<!-- Sticky Header with socials-->
	<div class="sticky-header">
		<a class="sticky-header-button" href="mailto: gunnarmagnum@gmail.com">gunnarmagnum@gmail.com</a>
		<a class="sticky-header-button" href="https://github.com/Raestkjoot" target="_blank">
			<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/></svg>
		</a>
		<a class="sticky-header-button" href="https://www.linkedin.com/in/gunnar-magnussen/" target="_blank">
			<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"/></svg>
		</a>
	</div>

	<!-- Header with navigation -->
	<header>
		<div>
			<h1>Gunnar Magnussen</h1>
			<p class="sub-title"><b>Game Programmer</b> | Gameplay, graphics and general game development.</p>
		</div>
		<div class="nav">
			<a class="header-button" href="index.html"> Projects </a>
			<a class="header-button" href="exp-and-edu.html"> Experience & Education </a>
			<a class="header-button" href="about-me.html"> About Me </a>
		</div>
	</header>

	<!-- TEXT -->
	 <div class="outer-text-container">
	<div class="text-container">
		<h1>Charry's Passage: Wake of Souls</h1>
		<div class="project-overview">
			<div class="project-overview-elem">
				<iframe width="560" height="315" src="https://www.youtube.com/embed/7tAOqLuGAuk?si=c4QhHgY8bnHg8fqR" title="YouTube video player" frameborder="0" 
				allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
				referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
				</iframe>
			</div>
			<div class="project-overview-elem">
				<i>
					<span class="material-symbols-outlined">manufacturing</span>
					&nbsp;<b>Engine:</b>&nbsp; Unity
				</i>
				<i>
					<span class="material-symbols-outlined">description</span>
					&nbsp;<b>Language:</b>&nbsp; C#
				</i>
				<i>
					<span class="material-symbols-outlined">list</span>
					&nbsp;<b>Tasks:</b>&nbsp; Dialogue system | tech lead | shaders | tech art
				</i>
				<i>
					<span class="material-symbols-outlined">groups</span>
					&nbsp;<b>Team Size:</b>&nbsp; 9
				</i>
				<i>
					<span class="material-symbols-outlined">link</span>
					&nbsp;<b>Links:</b>&nbsp; <a class="links-button" href="https://github.com/Raestkjoot/CharrysPassage" target="_blank">Source</a>
				</i>
				<i>
					Charry's Passage is a narrative game with endless runner-esque gameplay in an isometric perspective. 
					The game takes a lot of inspiration from Hades: it has fully voiced dialogue and combines 2D hand drawn art 
					with shaders and 3D animations pre-rendered to 2D frame animations.
				</i>
			</div>
		</div>
		<hr />

		<!-- DIALOGUE SYSTEM -->
		<h2>
			Dialogue System
		</h2>
		<p>
			he dialogue system was designed in close collaboration with the design and narrative team to make sure 
			it could do what we wanted and was easy to work with. The dialogue system has two types of dialogue:
			<li> <b>Scene:</b> A fullscreen dialogue sequence. A dialogue cut-scene. </li>
			<li> <b>In-situ:</b> Ambient dialogue happening during gameplay that allows characters to react to events.</li>
		</p>
		<p>
			A central dialogue manager can be called from anywhere to play dialogue. This class is instantiated in a bootstrap scene so it is always available.
		</p>
		<img src="images/charrys-dialogue-system.png" class="project-image" style="height: 400px;"/>
		<p>
			We used scriptable objects to make it easy for the narrative team to build dialogue sequences and add audio files to the appropriate dialogue lines. 
			The game features fully voiced dialogue, so it was important to have a good way to link the text and audio files together.
		</p>
		<img src="images/charrys-dialogue-scene-line.jpg" class="project-image" style="height: 250px;"/>
		<p>
			We have a small set of characters that have some character data associated with them (portrait, name and color). 
			Using an enum the designers could easily choose a character for a dialogue line from a drop-down menu.
		</p>
		Here is a code snippet that shows how playing a dialogue scene worked in the DialogueManager:
		<li>First the public function <span style="color: #a6e22e">PlayDialogueScene</span> gets called. It interupts in-situ dialogue if necessary and starts a "while loop" using the IEnumerable interface.</li>
		<li><span style="color: #a6e22e">PlayLine</span> gets all the data to play audio and make the dialogue box display text and portraits.</li>
		<li><span style="color: #a6e22e">ShowAllOrNext</span> is called when the user presses the "next" button. This either shows all the text, plays the next line, or ends the dialogue scene.</li>
<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #75715e">/// &lt;summary&gt;</span>
<span style="color: #75715e">/// Play a dialogue scene composed of a sequence of dialogue lines.</span>
<span style="color: #75715e">/// &lt;/summary&gt;</span>
<span style="color: #75715e">/// &lt;param name=&quot;lines&quot;&gt; The dialogue lines containing the text and other information. &lt;/param&gt;</span>
<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">PlayDialogueScene</span><span style="color: #f8f8f2">(SceneDialogueSequenceSO</span> <span style="color: #f8f8f2">lines)</span>
<span style="color: #f8f8f2">{</span>
<span style="color: #75715e">#if UNITY_EDITOR</span>
	<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(DialogueDisabler.GetIsDialogueDisabled())</span> <span style="color: #f8f8f2">{</span> <span style="color: #66d9ef">return</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">}</span>
<span style="color: #75715e">#endif</span>

	<span style="color: #f8f8f2">_previous</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">GameStateManager.Instance.CurrentGameState;</span>
	<span style="color: #f8f8f2">GameStateManager.Instance.SetState(GameState.InCutscene);</span>
	<span style="color: #75715e">// Interrupt other dialogue if necessary</span>
	<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(_isPlayingDialogueInSitu)</span>
	<span style="color: #f8f8f2">{</span>
		<span style="color: #f8f8f2">_audioSource.Stop();</span>
		<span style="color: #f8f8f2">_dialogueInSituBox.Hide();</span>
		<span style="color: #f8f8f2">_isPlayingDialogueInSitu</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">false;</span>
		<span style="color: #f8f8f2">StopAllCoroutines();</span>
	<span style="color: #f8f8f2">}</span>

	<span style="color: #f8f8f2">_curSceneLines</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">lines;</span>
	<span style="color: #75715e">// This enumerator is used in ShowAllOrNext to iterate through all the lines.</span>
	<span style="color: #f8f8f2">_sceneLineEnumerator</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">((IEnumerable</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">SceneDialogueLineSO</span><span style="color: #f92672">&gt;</span><span style="color: #f8f8f2">)_curSceneLines).GetEnumerator();</span>

	<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(_sceneLineEnumerator.MoveNext())</span>
	<span style="color: #f8f8f2">{</span>
		<span style="color: #f8f8f2">PlayLine(_sceneLineEnumerator.Current);</span>
	<span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">private</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">PlayLine</span><span style="color: #f8f8f2">(SceneDialogueLineSO</span> <span style="color: #f8f8f2">line)</span>
<span style="color: #f8f8f2">{</span>
	<span style="color: #f8f8f2">_isPlayingDialogueScene</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">true;</span>

	<span style="color: #f8f8f2">_dialogueSceneBox.Display(</span>
		<span style="color: #f8f8f2">line.GetText(),</span>
		<span style="color: #f8f8f2">line.GetSpeaker(),</span>
		<span style="color: #f8f8f2">line.GetSpeakerName(),</span>
		<span style="color: #f8f8f2">GetPortrait(line,</span> <span style="color: #f8f8f2">SpeakerSide.Left),</span>
		<span style="color: #f8f8f2">GetPortrait(line,</span> <span style="color: #f8f8f2">SpeakerSide.Right),</span>
		<span style="color: #f8f8f2">line.GetSpeakerColor());</span>

	<span style="color: #f8f8f2">AudioClip</span> <span style="color: #f8f8f2">audioClip</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">line.GetAudio();</span>
	<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(audioClip)</span>
	<span style="color: #f8f8f2">{</span>
		<span style="color: #f8f8f2">_audioSource.PlayOneShot(line.GetAudio());</span>
	<span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">private</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">ShowAllOrNext</span><span style="color: #f8f8f2">()</span>
<span style="color: #f8f8f2">{</span>
	<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">!</span><span style="color: #f8f8f2">_isPlayingDialogueScene)</span>
	<span style="color: #f8f8f2">{</span>
		<span style="color: #66d9ef">return</span><span style="color: #f8f8f2">;</span>
	<span style="color: #f8f8f2">}</span>

	<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(_dialogueSceneBox.GetIsRollingText())</span>
	<span style="color: #f8f8f2">{</span>
		<span style="color: #f8f8f2">_dialogueSceneBox.ShowAllText();</span>
	<span style="color: #f8f8f2">}</span>
	<span style="color: #66d9ef">else</span>
	<span style="color: #f8f8f2">{</span>
		<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(_sceneLineEnumerator</span> <span style="color: #f92672">!=</span> <span style="color: #f8f8f2">null</span> <span style="color: #f92672">&amp;&amp;</span> <span style="color: #f8f8f2">_sceneLineEnumerator.MoveNext())</span>
		<span style="color: #f8f8f2">{</span>
			<span style="color: #f8f8f2">_audioSource.Stop();</span>
			<span style="color: #f8f8f2">PlayLine(_sceneLineEnumerator.Current);</span>
		<span style="color: #f8f8f2">}</span>
		<span style="color: #66d9ef">else</span>
		<span style="color: #f8f8f2">{</span>
			<span style="color: #f8f8f2">_dialogueSceneBox.Hide();</span>
			<span style="color: #f8f8f2">_audioSource.Stop();</span>
			<span style="color: #f8f8f2">_isPlayingDialogueScene</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">false;</span>
			<span style="color: #f8f8f2">GameStateManager.Instance.SetState(_previous);</span>
		<span style="color: #f8f8f2">}</span>
	<span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
<br>
		<hr/>

		<!-- TECH ART -->
		 <h2>
			Tech Art
		 </h2>
		 <p>
			We wanted to achieve a visual style that was distinct, but still heavily inspired by Hades (Supergiant Games, 2020). 
			I worked closely with our 2D artist and art director to bring their vision to life in the game.
		 </p>
		 <p>
			I made a structure for setting up the game world with parallax scrolling, 2D lighting and post-processing effects.
		 </p>
		 <p>
			For the river I created a shader in Unity's shader graph that uses voronoi cells to create the wave highlights, 
			gradient noise is used to offset the uv sampling which distorts the cells to create a wave-like effect. 
			An important consideration was that we wanted to have many different rivers, 
			so I added parameters to easily tweak the way the river looked and how it moved.
		 </p>
		 <div class="project-image-container">
			<img src="images/charrys-river-default.gif" class="project-image"/>
			<img src="images/charrys-river-ziggy.gif" class="project-image"/>
		</div>
		<p>
			To combine 2D and 3D assets in the best way possible and use a single render pipeline and make use of powerful 2D lighting, 
			the 3D assets are pre-rendered to 2D frame animations. I made the character in Blender following our artist's concept art, 
			animated it and exported it into 2D frames. To make the boat and the oar look submerged in the river, I added a plane with a transparency mask 
			so that fragments that go into it are not rendered.
		</p>
		<img src="images/charrys-gameplay.gif" class="project-image"/>

		<hr/>

		<!-- TECH LEAD -->
		 <h2>
			Tech Lead
		 </h2>
		 <p>
			Some of the tasks I did as tech lead were: 

			<li>Setup documentation in Notion and made sure it was maintained.</li>
			<li>Lead weekly tech meetings, writing out the agenda and making sure relevant parties were present.</li> 
			<li>Kept an overview of the project from a technical perspective.</li>
			<li>Ensured a consistent code style was followed.</li> 
			<li>Lead scrum meetings and made sure programmers had tasks on the Kanban board to work on</li>
			<li>Kept track of progress and time estimates using a macro chart.</li>
		 </p>

	</div>
</div>

</body>
</html>